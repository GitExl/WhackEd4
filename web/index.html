<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">

	<title>WhackEd4</title>

	<link type="text/css" rel="stylesheet" href="style.css">
</head>
<body>

	<div id="ribbon">
		<div id="top-container" class="ribbon-container">
			<img id="logo" src="images/logo.png">

			<div id="ribbon-content">
				<p>
					WhackEd4 is designed as a replacement for the old Dehacked DOS utility. It can read and modify any Doom Dehacked patches for versions 1.9 and up, and expands on
					Dehacked's feature list with the following:
				</p>
				<ul>
					<li>A configurable workspace with separate editor windows.</li>
					<li>Sprite previews from a loaded IWAD and PWADs.</li>
					<li>Full support for Boom's extensions such as codepointer and thing flag mnemonics.</li>
					<li>State animation preview with sound playback (where possible).</li>
					<li>Editing multiple states at the same time.</li>
					<li>Filtering the displayed list of states by thing states, weapon states or unused states.</li>
					<li>Does not require a Doom executable, but reads engine data from table files.</li>
					<li>State highlighting based on sprite index.</li>
					<li>Separate undo actions for every editor window.</li>
					<li>Copy and pasting things and states.</li>
					<li>Support for DeHackEd features of Doom 1.9, The Ultimate Doom 1.9, Boom, Marine's Best Friend, Doom Retro and ZDaemon.</li>
				</ul>
			</div>

			<div id="thumbnails">
				<a class="lightbox" href="images/screen01.png"><img src="images/screen01_thumb.png"></a>
				<a class="lightbox" href="images/screen02.png"><img src="images/screen02_thumb.png"></a>
				<a class="lightbox" href="images/screen03.png"><img src="images/screen03_thumb.png"></a>
			</div>

			<a class="button normal" href="files/whacked4-setup-1.3.2.exe">Download 1.3.2</a>
			<a class="button side" href="#section-changelog">Changelog</a>
			<a class="button side" href="#section-source">Source code</a>

			<p class="below-button">
				<a href="files/whacked4-1.3.2.7z">Download standalone 7zip archive</a>
			</p>
		</div>
	</div>

	<div id="container">
		<div id="content">
			<h1 id="section-changelog">Changelog</h1>
						<h2>Version 1.3.2</h2>
            <ul>
            	<li>Fixed: [CODEPTR] frame definitions were not always correctly read from patches. Thanks to Gregor.</li>
							<li>Fixed: Sound loading was broken, and was not 1-based. Thanks to MTrop.</li>
            </ul>

						<h2>Version 1.3.1</h2>
            <ul>
            	<li>Fixed: writing actions/code pointers for vanilla-styles patches. Thanks to Asht Mslf.</li>
            </ul>

            <h2>Version 1.3.0</h2>
            <ul>
                <li>Added: DeHackEd Extended (DEHEXTRA) configuration with extra states, sounds, things and sprites.</li>
                <li>Added: support for DEHEXTRA thing fields: Gib health, Dropped item, Pickup width, Projectile pass height and Fullbright.</li>
                <li>Added: Doom Retro thing fields: Blood, Shadow offset, Retro Bits, Name and Plural.</li>
                <li>Added: state preview now uses a state's unused 1 and 2 parameters as offsets if previewing a state from the weapons editor (right-click state label).</li>
                <li>Added: better Linux compatibility. The application starts and is somewhat usable, but a number of UI issues still prevent it from working well.</li>
                <li>Added: IWAD detection for chex.wad and chex3.wad (official version). Thanks to Acts19quiz.</li>
                <li>Changed: engine table files can now include (base table) files. This leads to smaller filesizes and makes for easier updating. As a result of this, strings in the Doom 1.9 and Ultimate Doom 1.9 tables are now keyed by their index.</li>
                <li>Changed: engine table files list only fields used by that engine to reduce their size and improve maintainability. Default entries for things, states, weapons, ammo and sounds are provided for tables that extend existing ones.</li>
                <li>Changed: string editing for vanilla patches will allow any number of characters to be entered, but disallow using the new string if it is too long.</li>
                <li>Changed: thing editor properties, states, sounds and flags are now tabbed to save on screen real estate. Especially useful if an engine has many thing properties.</li>
                <li>Changed: WhackEd4 is now a 64 bit application.</li>
                <li>Changed: moved preview availability warning to notification text inside the patch settings window.</li>
                <li>Changed: scale UI and bitmap assets for high DPI displays.</li>
                <li>Changed: text input controls only select the entire contents when the end is selected.</li>
                <li>Fixed: the state animation preview now displays action names instead of code pointers for non-extended patches.</li>
                <li>Fixed: a weapon's FireCGun and FirePlasma actions would only mark the extra muzzle flash state as used if the action was used on the first fire state.</li>
                <li>Fixed: loading non-extended patches that try to set a codepointer on a state that originally had none will now display a warning. Thanks to Zodomaniac.</li>
                <li>Fixed: saving a yet unsaved patch while exiting caused a crash. Thanks to TheStupidestBeing.</li>
                <li>Fixed: BEX strings that do not appear in the engine selected for a patch will now not be visible in the strings editor, but will remain in the saved patch.</li>
                <li>Fixed: fixed a wrong next state value in the MBF tables for S_GRENADE (968). Thanks to hawkwind3.</li>
                <li>Fixed: crash on startup in some rare cases where no patch was loaded yet. Thanks to Endy McGufin.</li>
                <li>Fixed: maximum string length calculation for non-extended patches did not take the terminating NULL character into account. Thanks to Altazimuth.</li>
                <li>Fixed: sprite frame selection up\down button did not work correctly.</li>
                <li>Fixed: sound priority values can now be in the full signed integer range (though anything above 127 is useless).</li>
                <li>Fixed: the MBF TRANSLATION2 flag is now available and will not be removed upon saving. Thanks to j0e.</li>
                <li>Fixed: the MBF TRANSLATION1 flag is now recognized, and aliased to TRANSLATION for Boom compatibility. Thanks to hawkwind3.</li>
                <li>Fixed: some typos in engine configuration files. Thanks to hawkwind3.</li>
                <li>Fixed: Doom Retro TRANSLUCENT flag now shows up correctly in the flag list, alongside Boom's TRANSLUCENT.</li>
                <li>Fixed: an MBF flag alias was missing. Thanks to hawkwind3.</li>
                <li>Fixed: when copying a thing or undoing changes to one, its speed property was wrong if it changed from or to a projectile.</li>
                <li>Fixed: hopefully, locale issues.</li>
                <li>Fixed: Zdaemon misc. rocketExplosionStyle is a string. Thanks to Acts19quiz.</li>
                <li>Fixed: selecting a Render Style would crash the application. Thanks to Acts19quiz.</li>
                <li>Fixed: prevent out of range sprite indices from causing errors. Thanks to NeophyteRonin.</li>
            </ul>

              <h2>Version 1.2.4</h2>
              <ul>
                <li>Fixed: invalid sprite names no longer cause a crash when loading\creating a patch, but are ignored instead.</li>
                <li>Fixed: changing miscellaneous values would result in a crash. Thanks to antares031, Xyzzy01.</li>
              </ul>

              <h2>Version 1.2.3</h2>
              <ul>
                <li>Fixed: no longer allow a state's action to be removed in non-extended patches. Thanks to Mechadon.</li>
                <li>Fixed: Boom configurations now properly refer to the red skullcard pickup string key as REDSKULL instead of REDSKUL. Thanks to EarthQuake.</li>
                <li>Fixed: a crash on startup if the program settings became empty or corrupted somehow. Default settings will now be loaded if this is the case.</li>
                <li>Changed: doubled size of sprite previews in the state editor.</li>
                <li>Changed: updated wxPython to 4.0.6.</li>
                <li>Changed: updated to Python 3.7.</li>
                <li>Changed: enabled high DPI support.</li>
                <li>Changed: reduced size of installed files.</li>
              </ul>

              <h2>Version 1.2.2</h2>
              <ul>
                <li>Fixed: a serious issue with saving thing, weapon and ammo names that could cause no names to be saved and the wrong names loaded when opening a second patch. Thanks to Da Werecat.</li>
                <li>Changed: detecting if a thing is a projectile is now done by looking for actions in it's used list of states that set the momentum as a non-fixed point value. Currently Chase and VileChase being used will cause a thing to not be considered a projectile and it's speed property to be automatically cast to a non-fixed point value internally and in written patches.</li>
              </ul>

                    <h2>Version 1.2.1</h2>
              <ul>
                <li>Added: support the RandomJump action in state previews.</li>
                <li>Added: Extended DehackEd configuration with the extra things and empty states from Doom Retro. Crispy Doom also supports these.</li>
                <li>Added: state actions that spawn things (like missiles from monster attacks) will now play that thing's sound during a preview.</li>
                <li>Fixed: unused state parameter descriptions would not be updated when an action using them was selected.</li>
                <li>Fixed: added missing things to the Doom Retro configuration. Thanks to VGA.</li>
                <li>Changed: WAD reloading is now faster and doesn't reset the UI state.</li>
              </ul>

              <h2>Version 1.2.0</h2>
			<ul>
				<li>Added: state animation preview (with sounds) by pressing ~ on a state or using the new state context menu. Pressing ~ again inside the animation preview will restart it. Right-clicking a thing or weapon state from their respective dialogs will preview it directly.</li>
				<li>Added: linking states together can now be done by selecting them, right-clicking and selecting a link option (or use the respective shortcut key). Linking is done in the order of selection.</li>
				<li>Added: an option to clear out all selected states from the state context menu.</li>
				<li>Added: an option to clear out a thing's properties from a thing's context menu.</li>
				<li>Added: DOOM Retro "Gib health" thing property.</li>
				<li>Added: barebones patch merging feature by loading a patch 'over' the current one.</li>
				<li>Fixed: state and thing copy and paste operations were much slower than they should to be.</li>
				<li>Changed: sprite selection dialog now shows sprites at 2x scale.</li>
				<li>Changed: always display a state's "unused" parameters since these actually affect a weapon sprite's offset even in vanilla Doom.</li>
				<li>Changed: updated to PyAudio 0.2.11.</li>
				<li>Changed: monospace font is now the more modern DejaVu Sans Mono.</li>
			</ul>

			<h2>Version 1.1.2</h2>
			<ul>
				<li>Fixed: Doom Retro's PlaySound action was missing a parameter name, causing a crash when it was selected. Thanks to AnotherLife.</li>
				<li>Fixed: rewrote sprite name, frame and rotation handling to better emulate Doom's behaviour. As a result, zero-rotation sprites can now replace sprites with multiple rotations. Thanks to VGA, AnotherLife.</li>
				<li>Fixed: when selecting a new sprite for a state, all selected state's frames were set to 0 when no specific frame was selected. Thanks to VGA.</li>
			</ul>

			<h2>Version 1.1.1</h2>
			<ul>
				<li>Added: A Doom Retro engine configuration (thanks to VGA).</li>
				<li>Added: Unknown Dehacked fields are now ignored, but also saved unaltered.</li>
				<li>Fixed: missing parameter names for the PlaySound and PlayWeaponSound state actions.</li>
				<li>Fixed: the sprite label property not updating after selecting a sprite in the state editor.</li>
				<li>Fixed: a crash when jumping to a state with the RandomJump action.</li>
				<li>Fixed: choosing a 30th sprite frame.</li>
				<li>Fixed: state parameters disappearing when selecting a state.</li>
				<li>Fixed: state action editing was possible in non-extended patches.</li>
				<li>Fixed: patch states with extra text in their headers being ignored.</li>
				<li>Fixed: calculation of maximum string length.</li>
			</ul>

			<h2>Version 1.1.0</h2>
			<ul>
				<li>Added: the ability to change the rotation in a sprite preview by dragging the mouse over it with the left button held down.</li>
				<li>Added: a number of new state, thing, weapon and miscellaneous options for advanced ZDaemon\ZDoom support.</li>
				<li>Added: better defined state action parameter support, including support for arguments.</li>
				<li>Added: a new miscellaneous editor UI that supports an arbitrary number of options. Double click items to quickly edit them.</li>
				<li>Added: clicking an active editor window toolbar button will bring it to the front if it is not already, otherwise it will close it.</li>
				<li>Added: closing dialogs is now possible with the ESC and a window close button.</li>
				<li>Added: a ZDaemon engine configuration file supporting some of ZDaemon's Dehacked extensions.</li>
				<li>Fixed: sound numbering and sound assignment used sound 1 as the dummy sound erroneously.</li>
				<li>Fixed: missing ampersands in thing flags.</li>
				<li>Fixed: thing names not being updated in the state filter list when a thing is renamed.</li>
				<li>Fixed: misspelling of ReFire and BFGSound actions.</li>
				<li>Fixed: monster infighting flag used the wrong value when enabled.</li>
				<li>Fixed: loading a patch through explorer no longer causes a crash on startup.</li>
				<li>Fixed: weapon editor undo functionality did not work properly.</li>
				<li>Changed: removed the MBF Beta configuration. The regular MBF configuration now also contains the beta functionality.</li>
				<li>Changed: editing action parameters is now made easier by only displaying parameters for actions that support them, complete with name labels and descriptions in tooltips.</li>
				<li>Changed: thing list indices start at 1 to make using state actions like MBF's Spawn easier.</li>
				<li>Changed: some control and window sizes have been altered to better fit with larger fonts.</li>
				<li>Changed: the string editor window will focus on the text to edit when activated, so the user can often begin typing immediately.</li>
				<li>Changed: reduced flickering when resizing editor windows.</li>
				<li>Changed: tab traversal between controls is now possible in most cases.</li>
				<li>Changed: the sprite selector will now not hide when pressing enter or clicking Ok if no sprite is selected.</li>
				<li>Changed: the sprite selector puts focus on the filter field for faster filtering.</li>
			</ul>

			<h2>Version 1.0.4</h2>
			<ul>
				<li>Fixed: added missing state 895 to the list of hardcoded used states.</li>
				<li>Fixed: added the second Chaingun muzzle flash state to the chaingun state filter.</li>
				<li>Fixed: unused thing flag mnemonics being displayed and saved for the MBF engine configuration.</li>
				<li>Changed: the weapon deselect and select state labels have been swapped. Internally they are still swapped to preserve the original erroneous Dehacked behaviour.</li>
				<li>Changed: renamed the Deselect and Select weapon states to Lower and Raise states respectively, to better reflect what they are supposed to do.</li>
				<li>Changed: characters can now be selected inside input fields without selecting the entire field.</li>
				<li>Changed: updated to wxWidgets 3.0.2.</li>
			</ul>

			<h2>Version 1.0.3</h2>
			<ul>
				<li>Fixed: warnings about missing color profiles on some systems.</li>
        <li>Fixed: the Lower and Raise state were (still) erroneously swapped.</li>
				<li>Changed: invalid graphics are previewed as "BAD IMAGE" instead of crashing.</li>
				<li>Changed: updated wxWidgets to 3.0.0.</li>
			</ul>

			<h2>Version 1.0.2</h2>
			<ul>
				<li>Added: an engine configuration file for MBF that includes the beta state actions, and removed the beta actions from the regular MBF configuration.</li>
				<li>Added: RandomJump states are now recognized as using the state in parameter1.</li>
				<li>Added: thing index numbers in the things editor.</li>
				<li>Fixed: -1 state durations could not be entered.</li>
				<li>Fixed: crash when trying to display a sprite with an invalid file format.</li>
				<li>Changed: detect additional thing flag delimiters supported by some source ports.</li>
			</ul>

			<h2>Version 1.0.1</h2>
			<ul>
				<li>Added: thing flag mnemonic name to thing flag tool tips.</li>
				<li>Changed: multiple thing flags with the same name can now be defined in engine configurations.</li>
				<li>Fixed: OpenShotgun and CloseShotgun action names should be OpenShotgun2 and CloseShotgun2.</li>
				<li>Fixed: added missing beta things, states and sprites to the MBF engine configuration.</li>
				<li>Fixed: added missing translucent flags to the Boom and MBF engine configurations.</li>
			</ul>

			<h2>Version 1.0.0</h2>
			<ul>
				<li>Added: a button to delete the selected IWAD in the patch settings dialog.</li>
				<li>Fixed: an ancient bug where the Raise and Lower actions are swapped.</li>
				<li>Fixed: state pasting not updating the filtered list.</li>
			</ul>


			<h2>Version 0.9.1 beta</h2>
			<ul>
				<li>Changed: allow patch load messages to be ignored.</li>
				<li>Changed: Make patch reading and writing less exception-prone.</li>
				<li>Changed: exit application after an exception has occurred.</li>
				<li>Changed: restructure startup into App object, and add exception dialog.</li>
				<li>Changed: adjust UI sizes to work better with large fonts.</li>
				<li>Fixed: exception dialog not closing application.</li>
				<li>Fixed: exceptions not displaying if a busy cursor was set.</li>
				<li>Fixed: clean the recent files list before displaying it in the startup dialog.</li>
				<li>Fixed: fix cheat keys being displayed instead of names.</li>
				<li>Fixed: cheats being displayed in the wrong order.</li>
				<li>Fixed: Ammo &amp; Keys patch key capitalization.</li>
				<li>Fixed: state action editing issues in non-extended patches.</li>
				<li>Fixed: do not fail silently when patch analysation fails.</li>
				<li>Fixed: the license file not being included in the 7zip build. </li>
			</ul>

			<h2>Version 0.9.0 beta</h2>
			<ul>
				<li>Added: WAD reload menu option.</li>
				<li>Added: license and additional credits to about, convert resources to PNG.</li>
				<li>Added: sound editing functionality.</li>
				<li>Added: miscellaneous editing functionality.</li>
				<li>Added: par time editing functionality.</li>
				<li>Added: new editor iconography.</li>
				<li>Added: cheat editing functionality.</li>
				<li>Added: ammo editing functionality.</li>
				<li>Added: weapon editing functionality.</li>
				<li>Added: string editing functionality.</li>
				<li>Changed: write and read patch entries if only the entry's name has changed.</li>
				<li>Changed: adjust UI sizes to work better with high-DPI display settings.</li>
				<li>Changed: draw a "floor" in sprite previews.</li>
				<li>Changed: move thing names list and display more data in it.</li>
				<li>Changed: move license text to a messagebox.</li>
				<li>Changed: sort action choices alphabetically.</li>
				<li>Changed: do not hide patch settings when browsing for a file.</li>
				<li>Changed: internal code comments and cleanups.</li>
				<li>Fixed: miscellaneous UI bugs.</li>
				<li>Fixed: mark patch as modified after setting a state or sound.</li>
				<li>Fixed: toggling a thing projectile flag not updating it's speed.</li>
				<li>Fixed: some listview columns being too wide. </li>
				<li>Fixed: file dialogs not being modal when they should be.</li>
				<li>Fixed: a patch engine detection bug.</li>
			</ul>

			<h2>Version 0.5.0 alpha</h2>
			<ul>
				<li>Initial release.</li>
			</ul>


			<h1 id="section-source">Source code</h1>
			<p>The source code for WhackEd4 is available under a <a href="https://opensource.org/licenses/BSD-2-Clause">BSD 2-clause license</a>, and can be viewed or forked on <a href="https://github.com/">GitHub</a>. Any contributions are more than welcome, provided they retain the coding style used in other WhackEd4 code, and are actual useful features for WhackEd4 to have.</p>

			<p class="logo-align">
				<a href="https://github.com/GitExl/WhackEd4" target="_blank">View WhackEd4's source code on GitHub</a>
			</p>

			<h1 id="section-feedback">Feedback</h1>
			<p>Found a bug or have an idea for WhackEd4? Place an issue on <a href="https://github.com/GitExl/WhackEd4/issues">WhackEd4's GitHub issues page</a>! I can also be reached through the <a href="https://www.doomworld.com/profile/953-exl/">Doomworld forums</a>.</p>
		</div>
	</div>

	<p id="footer">Hosted by <a href="https://www.teamhellspawn.com/" target="_blank"><img src="images/teamhellspawn.png"></a><p>

	<div id="darken"></div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script type="text/javascript">
			/* global jQuery */
			(function() {
				'use strict';

				function scrollTo(dest, duration) {
					jQuery('html, body').animate({
						scrollTop: jQuery(dest).offset().top
					}, duration);
				}

				jQuery(function() {
					var darken = jQuery('#darken');

					jQuery('.lightbox').each(function(index, element) {
						element = jQuery(element);

						// Preload thumbnail.
						var img = jQuery('<img src="' + element.attr('href') + '">');

						jQuery(this).bind('click', function() {
							darken.css('background-image', 'url("' + element.attr('href') + '")');
							darken.fadeIn(200);

							return false;
						});
					});

					darken.bind('click', function() {
						jQuery(this).fadeOut(200);
					});

					jQuery('.button').bind('click', function() {
						var dest = jQuery(this).attr('href');
						if (dest.substr(0, 1) !== '#') {
							return true;
						}

						jQuery('#container').fadeIn(250);
						scrollTo(dest, 250);

						return false;
					});
				});
			})();
		</script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-30782761-3', 'auto');
      ga('send', 'pageview');
    </script>

</body>
</html>
